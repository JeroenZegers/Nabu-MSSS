[evaluator]
evaluator = multi_task
tasks = task task0 taskMin3 taskMin6
requested_utts = 3000
batch_size = 30
segment_length = full

[task]
evaluator = task_loss_evaluator
loss_type = deepattractornet_noisefilter
inputs = features noisespectrogram
outputs = bin_emb noise_filter

nodes = n0 noise_filter reconstruct_layer n1 bin_emb

n0_model = main_noise
n0_inputs = features

noise_filter_model = noisefilter
noise_filter_inputs = n0

reconstruct_layer_model = reconstruct
reconstruct_layer_inputs = noisespectrogram noise_filter

n1_model = main_seperate
n1_input = reconstruct_layer

bin_emb_model = outlayer
bin_emb_input = n1

features = testspec
noisespectrogram = testmixtomask
targets = partition_targets spectrogram_targets mix_to_mask
partition_targets = testpartitiontargets
spectrogram_targets = testspectrogramtargets
mix_to_mask = testmixtomask

[task0]
evaluator = task_loss_evaluator
loss_type = deepattractornet_noisefilter
inputs = features noisespectrogram
outputs = bin_emb noise_filter

nodes = n0 noise_filter reconstruct_layer n1 bin_emb

n0_model = main_noise
n0_inputs = features

noise_filter_model = noisefilter
noise_filter_inputs = n0

reconstruct_layer_model = reconstruct
reconstruct_input = noisespectrogram noise_filter

n1_model = main_seperate
n1_input = reconstruct_layer

bin_emb_model = outlayer
bin_emb_input = n1

features = testspec0
noisespectrogram = testmixtomask0
targets = partition_targets spectrogram_targets mix_to_mask
partition_targets = testpartitiontargets0
spectrogram_targets = testspectrogramtargets0
mix_to_mask = testmixtomask0

[taskMin3]
evaluator = task_loss_evaluator
loss_type = deepattractornet_noisefilter
inputs = features noisespectrogram
outputs = bin_emb noise_filter

nodes = n0 noise_filter reconstruct_layer n1 bin_emb

n0_model = main_noise
n0_inputs = features

noise_filter_model = noisefilter
noise_filter_inputs = n0

reconstruct_layer_model = reconstruct
reconstruct_input = noisespectrogram noise_filter

n1_model = main_seperate
n1_input = reconstruct_layer

bin_emb_model = outlayer
bin_emb_input = n1

features = testspecMin3
noisespectrogram = testmixtomaskMin3
targets = partition_targets spectrogram_targets mix_to_mask
partition_targets = testpartitiontargetsMin3
spectrogram_targets = testspectrogramtargetsMin3
mix_to_mask = testmixtomaskMin3

[taskMin6]
evaluator = task_loss_evaluator
loss_type = deepattractornet_noisefilter
inputs = features noisespectrogram
outputs = bin_emb noise_filter

nodes = n0 noise_filter reconstruct_layer n1 bin_emb

n0_model = main_noise
n0_inputs = features

noise_filter_model = noisefilter
noise_filter_inputs = n0

reconstruct_layer_model = reconstruct
reconstruct_input = noisespectrogram noise_filter

n1_model = main_seperate
n1_input = reconstruct_layer

bin_emb_model = outlayer
bin_emb_input = n1

features = testspecMin6
noisespectrogram = testmixtomaskMin6
targets = partition_targets spectrogram_targets mix_to_mask
partition_targets = testpartitiontargetsMin6
spectrogram_targets = testspectrogramtargetsMin6
mix_to_mask = testmixtomaskMin6
